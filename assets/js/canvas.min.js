function drawActivity(e,t){var n=new Path.Rectangle({width:100,height:50,strokeWidth:2,strokeColor:"black",fillColor:"white",type:"activity",subtype:""});activityConnectors=makeConnectors(e,t,100,50);var o=new Group;o.addChildren([n,activityConnectors]);var i=new SymbolDefinition(o);return new SymbolItem(i)}function makeConnectors(e,t,n,o){var i=new Path.Circle({radius:4,fillColor:"grey",type:"connector"}),r=[new Point(e+n/2,t),new Point(e,t+o/2),new Point(e-n/2,t),new Point(e,t-o/2)],c=new Group({visible:!1}),l=new SymbolDefinition(i);return r.forEach(function(e){c.addChild(new SymbolItem(l,e))}),c}function drawEvent(e,t){var n=new Path.Circle({radius:20,center:[e,t],strokeWidth:2,strokeColor:"black",fillColor:"white",type:"event",subtype:""}),o=makeConnectors(e,t,40,40),i=new Group({children:[n,o],name:"eventGoup"}),r=new SymbolDefinition(i),c=new SymbolItem(r,[e,t]);return c.onMouseEnter=function(){console.log(this.definition.item[1])},c.onMouseLeave=function(){console.log(this.definition.item[1])},c}function getChildren(e,t){for(var n=[];e;e=e.nextSibling)1==e.nodeType&&e!=t&&n.push(e);return n}function getSiblings(e){return getChildren(e.parentNode.firstChild,e)}var elementType="";tool.minDistance=10,window.addEventListener("wheel",function(e){e.preventDefault(),e.deltaY>0?project.view.zoom-=.02:project.view.zoom+=.02});var eventOptions=document.querySelectorAll(".element-option");eventOptions.forEach(function(e){e.onclick=function(){elementType=this.getAttribute("data-type")}}),project.view.onMouseUp=function(e){"event"===elementType?(drawEvent(e.point.x,e.point.y),elementType=""):"activity"===elementType&&(drawActivity(e.point.x,e.point.y),elementType=""),console.log(project.activeLayer.children)},function(){var e=document.querySelectorAll(".element");e.forEach(function(e){e.addEventListener("click",function(){this.classList.toggle("selected"),getSiblings(this).forEach(function(e){e.classList.remove("selected")})})}),document.querySelector("canvas").addEventListener("click",function(){e.forEach(function(e){e.classList.remove("selected")})})}();